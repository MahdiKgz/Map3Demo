import { createSlice } from "@reduxjs/toolkit";

const initialState = {
  models: [
    {
      id: "car-1",
      url: "/models/car.glb",
      color: "#ff0000",
      speed: 0.0002,
      type: "vehicle",
      route: [
        [51.41289315407019, 35.73849852119572],
        [51.41451968397578, 35.737407406209755],
        [51.41490279225883, 35.73704733498252],
        [51.4150977070006, 35.73655087046933],
        [51.41521892329595, 35.73626045432273],
        [51.41531474562086, 35.73616212818669],
        [51.41539067995248, 35.73608581584632],
        [51.41553531742409, 35.73573947174057],
        [51.41555882101201, 35.73565141791455],
        [51.41458071011792, 35.735381385573035],
      ],
    },
    {
      id: "air-1",
      url: "/models/airplane_model.glb",
      color: "#ffaa00",
      speed: 0.00025,
      type: "airplane",
      altitude: 100,
      scale: 0.5,
      route: [
        [51.4107518760224, 35.73372640732208],
        [51.41335145226475, 35.73440710755406],
        [51.41578331391091, 35.72762253525313],
        [51.41357507172708, 35.72723677297601],
        [51.4107518760224, 35.73372640732208],
      ],
    },
    {
      id: "sat-1",
      url: "/models/satellite.glb",
      color: "#00ffaa",
      type: "satellite",
      tle: {
        line1:
          "1 25544U 98067A   24257.12345678  .00001264  00000-0  29621-4 0  9991",
        line2:
          "2 25544  51.6442  21.8765 0007291  32.5541  84.1247 15.48987654321689",
      },
      altitudeOffset: 500000,
      scale: 60000,
    },
    {
      id: "car-2",
      url: "/models/car.glb",
      color: "#0000ff",
      speed: 0.00015,
      type: "vehicle",
      route: [
        [51.40761849246789, 35.73037512341405],
        [51.40743251098604, 35.73033795494193],
        [51.40702655608078, 35.73028813950644],
        [51.40684810086637, 35.730264536037424],
        [51.40681557407862, 35.73026368804027],
        [51.40687454886037, 35.73000569197836],
        [51.406905300331346, 35.72986880611535],
        [51.4069236595401, 35.72978811462629],
        [51.4069409843452, 35.72971105934499],
        [51.40695426136517, 35.72965531037525],
        [51.40696445853024, 35.72960922970586],
        [51.406969651422514, 35.72958628629512],
        [51.40698439764353, 35.7295207563639],
        [51.40699600446601, 35.72947069838743],
        [51.407010776754646, 35.72940698818492],
        [51.407021900585306, 35.72935439161745],
        [51.40703192465824, 35.72931115963999],
        [51.40704207745256, 35.72926854200554],
        [51.40705660827655, 35.729203562384015],
        [51.40707596999229, 35.729116014706975],
        [51.40708557453914, 35.72907478451775],
        [51.407093837832235, 35.72904164969866],
        [51.407101713495706, 35.729004794788196],
        [51.40711409181145, 35.72895219180161],
        [51.407125127081144, 35.728904306505584],
        [51.407139545175454, 35.728843583440366],
        [51.407159505098974, 35.728754579693245],
        [51.40717372086718, 35.72869151738503],
        [51.40718023633249, 35.728647942436425],
        [51.407206848428245, 35.728539833222015],
        [51.4072248497429, 35.72844989914084],
        [51.407254780837235, 35.72832455287532],
        [51.40727671747629, 35.72822726969427],
        [51.40728517098128, 35.7281876028692],
        [51.40738559554393, 35.72819542133021],
        [51.40760598504474, 35.72820161385815],
        [51.40783468219661, 35.72821338288196],
        [51.40801329966834, 35.72821873033374],
        [51.40811673316327, 35.72822349891423],
        [51.40833925977816, 35.72823289183036],
        [51.40848811507493, 35.72823787772337],
        [51.40871535735144, 35.7282484985988],
        [51.40891670793491, 35.728255543758024],
        [51.40905226143201, 35.728261287877785],
        [51.409183143696396, 35.7282689821328],
        [51.409283841198175, 35.72827409376302],
        [51.40936883465139, 35.728276171532926],
        [51.40939465102224, 35.72812448384387],
        [51.409420204554465, 35.727993029160814],
        [51.40943481207137, 35.72789869986518],
        [51.409456238524115, 35.727763212798365],
        [51.409464641927116, 35.72771416976886],
        [51.409509828329504, 35.7274612642499],
        [51.40956377392229, 35.72711290307133],
        [51.409588744555094, 35.7269627579753],
        [51.40961498275618, 35.72681789302587],
        [51.40964043572282, 35.72667378222083],
        [51.40966059395964, 35.72654856724721],
        [51.409684940840776, 35.72639940135288],
        [51.409697693740924, 35.7263199309774],
        [51.409708213095456, 35.72625643717812],
        [51.40972039784043, 35.7261888523653],
        [51.4097318148591, 35.72610984764363],
        [51.40974918264786, 35.72601578257053],
        [51.409761265741054, 35.725941773366785],
        [51.409779627438695, 35.72583350018907],
        [51.40980840007123, 35.7256639710733],
        [51.40982308208174, 35.72557828343038],
        [51.40983769857954, 35.72548790848788],
        [51.40989443689628, 35.72515101611468],
        [51.409916076914755, 35.72502126014005],
        [51.40993471852076, 35.72491409021046],
        [51.409964034750885, 35.72474289016638],
        [51.40998718053936, 35.72459246524063],
        [51.41001317335471, 35.724457004424465],
        [51.41003781775379, 35.724305953291434],
        [51.410055889899326, 35.724189574615366],
        [51.41005925829455, 35.72417504641001],
        [51.410032019767954, 35.724155436185725],
        [51.409985282614485, 35.724146153599946],
        [51.409920670252745, 35.724135585955935],
        [51.409902541534876, 35.72412893927395],
        [51.409884808676054, 35.72411228588484],
        [51.40988366268476, 35.7240941749519],
        [51.4099148685919, 35.724078230523375],
        [51.409961795621285, 35.72405381048242],
        [51.41000302874539, 35.72403564418336],
        [51.41003957456306, 35.72401562887957],
        [51.4100814565752, 35.723993861454844],
        [51.41013610342375, 35.72395154089446],
        [51.410191909655566, 35.72390855956725],
        [51.410228803167996, 35.72386777574921],
        [51.41025011991388, 35.72384381970028],
        [51.410265597416554, 35.72382622303836],
        [51.41027657659424, 35.7238139431137],
        [51.410280436868504, 35.72380889275853],
        [51.410265465805196, 35.723799587220824],
        [51.41024102901781, 35.72378457255414],
        [51.41022388405861, 35.72377470089357],
        [51.41021700693784, 35.72377053097303],
        [51.4102440534769, 35.72376368054151],
        [51.410266298420794, 35.72375743220559],
        [51.4102842231805, 35.72375345508287],
        [51.41030097685368, 35.72374762923218],
        [51.410328368241494, 35.72374086860842],
        [51.41039272825671, 35.723724283911736],
        [51.41042627458515, 35.72371542112104],
        [51.410453418762955, 35.723707361110456],
        [51.41048628842876, 35.72369924835807],
        [51.41054923210024, 35.72368390954253],
        [51.41058695627686, 35.72368045106337],
        [51.41064601496382, 35.723675907206044],
        [51.41071364153305, 35.7236772841615],
        [51.41079112674359, 35.723679014726926],
        [51.41085327974136, 35.72368044210296],
        [51.41089050624552, 35.723680543607855],
        [51.41096404113486, 35.72371297587861],
        [51.411040515068294, 35.72374027017982],
        [51.41110271423696, 35.72376458499501],
      ],
    },
    {
      id: "moto-1",
      url: "/models/motor.glb",
      color: "#00c1ff",
      speed: 0.0003,
      type: "vehicle",
      scale: 0.09,
      route: [
        [51.41565624315484, 35.72398305720331],
        [51.415823857207386, 35.72398545982645],
        [51.415951619644716, 35.72398699568002],
        [51.416054130068204, 35.72399473420495],
        [51.41613197270067, 35.72402579416011],
        [51.41621152646644, 35.72407936488162],
        [51.41625908425007, 35.724145172199144],
        [51.41628577134881, 35.72422142207789],
        [51.416262860665114, 35.72433095980033],
        [51.41620482614738, 35.724527112732375],
        [51.416153551777, 35.72469207883974],
        [51.416097860046904, 35.72488117839535],
        [51.41604895828118, 35.725041594018506],
        [51.41599482529227, 35.72522390014515],
        [51.41593791257398, 35.725412805223456],
        [51.41585321303691, 35.72569710768748],
        [51.415786987689984, 35.72591681523977],
        [51.41574788414522, 35.726039618245736],
        [51.41573185074387, 35.726112714772526],
        [51.41571041239686, 35.72625009842649],
        [51.41568521902127, 35.72642348718085],
        [51.41566423921421, 35.72655451636392],
        [51.41562435108969, 35.72683619405694],
        [51.41557475183254, 35.72717427750908],
        [51.415528276149814, 35.72731770670062],
        [51.415444146151884, 35.727430577417095],
        [51.41530706185125, 35.72749226337605],
        [51.415205620236605, 35.72754844734315],
        [51.41517361415248, 35.727562505669056],
        [51.414974212740816, 35.72751075733973],
        [51.41480835373585, 35.72746828461092],
        [51.41466469882181, 35.72742889448436],
        [51.41450526652602, 35.727387981224695],
        [51.41425569608185, 35.72732180199341],
        [51.414083797145906, 35.727274443802926],
        [51.413919207637576, 35.72723343346216],
        [51.41381299571495, 35.72721800645496],
        [51.41368510916925, 35.727218043373185],
        [51.413605553208555, 35.72725666406512],
        [51.413533744951536, 35.72734855807039],
        [51.4134907142014, 35.72745904489129],
        [51.41342890275581, 35.72762518821045],
        [51.41338181515721, 35.727758307690635],
        [51.41333665048319, 35.72787037459257],
        [51.41330376966914, 35.72795621747855],
        [51.41323623248866, 35.72811232706994],
        [51.41317198064965, 35.72825573075316],
        [51.413111471616475, 35.72838970530955],
        [51.41298986119634, 35.728630941154805],
        [51.412879751210596, 35.72885122093794],
        [51.41276711846828, 35.729083193688865],
        [51.412645820073664, 35.72932661560239],
        [51.412504999548844, 35.72963581362352],
        [51.41234631803772, 35.7299635124068],
        [51.41217510165262, 35.730322898530204],
        [51.412011512058456, 35.73066271882418],
        [51.41189784632792, 35.73089171687489],
        [51.411736462419526, 35.73124480930237],
        [51.41162131737215, 35.731482889358304],
        [51.411495239766026, 35.73172666942703],
        [51.41134535239229, 35.73202595019902],
        [51.41123129018587, 35.73226556606852],
        [51.41107719730698, 35.7326086886179],
        [51.410901124619755, 35.732984610073984],
        [51.410774644085706, 35.73325018956599],
        [51.41063587948287, 35.733544469575065],
        [51.41050962804718, 35.733815346919314],
        [51.41036784712975, 35.73414964085214],
        [51.4103235484294, 35.73425340162851],
      ],
    },
  ],
  chasedModelId: null,
};

const modelsSlice = createSlice({
  name: "models",
  initialState,
  reducers: {
    updateModelSpeed: (state, action) => {
      const { id, speed } = action.payload;
      const model = state.models.find((m) => m.id === id);
      if (model) model.speed = speed;
    },
    setChasedModel: (state, action) => {
      state.chasedModelId = action.payload;
    },
  },
});

export const { updateModelSpeed, setChasedModel } = modelsSlice.actions;
export default modelsSlice.reducer;
